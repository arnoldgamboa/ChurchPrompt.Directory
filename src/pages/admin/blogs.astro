---
import MainLayout from '@/layouts/MainLayout.astro';
import { AdminBlogsWithProvider } from '@/components/admin/AdminBlogsWithProvider';

const convexUrl = import.meta.env.PUBLIC_CONVEX_URL;

if (!convexUrl) {
  throw new Error('PUBLIC_CONVEX_URL is not set');
}

export const prerender = false;
---

<MainLayout title="Blog Management | Church Prompt Directory">
  <div class="container py-8">
    <div class="mb-8">
      <div class="flex items-center justify-between mb-4">
        <div>
          <h1 class="text-4xl font-bold mb-2">Blog Management</h1>
          <p class="text-lg text-muted-foreground">
            Create and manage blog posts for the community.
          </p>
        </div>
        <a 
          href="/admin" 
          class="inline-flex items-center px-4 py-2 rounded-md border border-input bg-background hover:bg-accent hover:text-accent-foreground transition-colors"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
            <path d="M21 3v5h-5"></path>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
            <path d="M3 21v-5h5"></path>
          </svg>
          Back to Dashboard
        </a>
      </div>
    </div>
    
    <AdminBlogsWithProvider client:only="react" convexUrl={convexUrl} />
  </div>
</MainLayout>
