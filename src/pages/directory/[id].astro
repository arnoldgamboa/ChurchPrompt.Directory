---
import MainLayout from '@/layouts/MainLayout.astro';
import { PromptDetailWithProvider } from '@/components/prompts/PromptDetailWithProvider';
import { Button } from '@/components/ui/button';
import { ArrowLeft } from 'lucide-react';

export const prerender = false;

const { id } = Astro.params;
const convexUrl = import.meta.env.PUBLIC_CONVEX_URL;

if (!id) {
  return Astro.redirect('/404');
}
---

<MainLayout title="Prompt Detail | Church Prompt Directory">
  <div class="container py-8">
    <!-- Back Button -->
    <div class="mb-6">
      <a href="/directory" class="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors">
        <ArrowLeft className="h-4 w-4" />
        Back to Directory
      </a>
    </div>

    <!-- Prompt Detail Component -->
    <PromptDetailWithProvider 
      client:only="react"
      convexUrl={convexUrl}
      promptId={id}
      isSubscribed={true}
      isFavorite={false}
    />
  </div>
</MainLayout>
