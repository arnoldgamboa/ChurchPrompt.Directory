---
import MainLayout from '@/layouts/MainLayout.astro';
import { BlogDetailWithProvider } from '@/components/blogs/BlogDetailWithProvider';

const convexUrl = import.meta.env.PUBLIC_CONVEX_URL;

if (!convexUrl) {
  throw new Error('PUBLIC_CONVEX_URL is not set');
}

export const prerender = false;

const { slug } = Astro.params;

// Note: Currently using client-side data fetching for simplicity.
// For better SEO and initial page load performance, consider implementing server-side
// data fetching using Convex HTTP API to fetch blog metadata and pass it as props.
// This would enable proper server-rendered meta tags and OG tags for social sharing.
const title = "Blog Post | Church Prompt Directory";
const description = "Read our latest insights and tips for church ministry.";
---

<MainLayout title={title} description={description}>
  <BlogDetailWithProvider client:only="react" convexUrl={convexUrl} slug={slug} />
</MainLayout>
